<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Convertisseur de timestamp - Learn & Tools</title>
    <meta name="description" content="Convertissez facilement un timestamp Unix en date lisible, et une date en timestamp.">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        :root {
            --bg: #0f172a;
            --accent: #38bdf8;
            --accent-soft: #1d4ed8;
            --text: #e5e7eb;
            --muted: #9ca3af;
            --border: #1f2937;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            background: radial-gradient(circle at top, #1d283a 0, #020617 45%, #020617 100%);
            color: var(--text);
            line-height: 1.6;
        }

        a { color: inherit; text-decoration: none; }

        header {
            border-bottom: 1px solid var(--border);
            background: rgba(15,23,42,0.95);
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .container {
            max-width: 960px;
            margin: 0 auto;
            padding: 0 1.25rem;
        }

        .nav {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.9rem 0;
        }

        .logo {
            font-weight: 700;
            letter-spacing: 0.05em;
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        .logo span {
            font-size: 0.8rem;
            padding: 0.1rem 0.4rem;
            border-radius: 999px;
            background: rgba(56,189,248,0.1);
            color: var(--accent);
        }

        .nav-links {
            display: flex;
            gap: 0.8rem;
            font-size: 0.9rem;
        }

        .nav-links a {
            padding: 0.3rem 0.8rem;
            border-radius: 999px;
            color: var(--muted);
            border: 1px solid transparent;
        }

        .nav-links a:hover {
            border-color: rgba(148,163,184,0.6);
            background: rgba(15,23,42,0.9);
            color: var(--text);
        }

        main {
            padding: 2rem 0 2.5rem;
        }

        h1 {
            font-size: 1.7rem;
            margin-bottom: 0.4rem;
        }

        .subtitle {
            font-size: 0.9rem;
            color: var(--muted);
            margin-bottom: 1.4rem;
        }

        .grid {
            display: grid;
            grid-template-columns: minmax(0, 1.2fr) minmax(0, 1.1fr);
            gap: 1.5rem;
        }

        .card {
            background: rgba(15,23,42,0.95);
            border-radius: 1rem;
            padding: 1.1rem;
            border: 1px solid rgba(31,41,55,0.9);
            box-shadow: 0 18px 40px rgba(15,23,42,0.9);
        }

        label {
            display: block;
            font-size: 0.9rem;
            margin-bottom: 0.2rem;
        }

        input[type="number"],
        input[type="datetime-local"] {
            width: 100%;
            padding: 0.45rem 0.6rem;
            border-radius: 0.6rem;
            border: 1px solid rgba(55,65,81,0.9);
            background: rgba(15,23,42,0.9);
            color: var(--text);
            font-size: 0.9rem;
            margin-bottom: 0.8rem;
        }

        input:focus {
            outline: none;
            border-color: var(--accent);
        }

        .mode {
            display: flex;
            gap: 0.9rem;
            margin: 0.4rem 0 0.9rem;
            font-size: 0.85rem;
            color: var(--muted);
            flex-wrap: wrap;
        }

        .mode label {
            display: flex;
            align-items: center;
            gap: 0.35rem;
            margin: 0;
        }

        .mode input {
            width: auto;
            margin: 0;
        }

        .row {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 0.6rem;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.35rem;
            font-size: 0.9rem;
            padding: 0.55rem 1.1rem;
            border-radius: 999px;
            border: 1px solid transparent;
            cursor: pointer;
            background: linear-gradient(135deg, var(--accent), var(--accent-soft));
            color: #0b1120;
            font-weight: 600;
            margin-right: 0.6rem;
        }

        .btn-secondary {
            background: none;
            border-color: rgba(75,85,99,0.9);
            color: var(--muted);
            font-weight: 500;
        }

        .btn:hover {
            filter: brightness(1.05);
        }

        .tag {
            display: inline-block;
            font-size: 0.75rem;
            padding: 0.15rem 0.6rem;
            border-radius: 999px;
            border: 1px solid rgba(55,65,81,0.9);
            color: var(--muted);
            margin-bottom: 0.6rem;
        }

        .result-line {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            margin-bottom: 0.4rem;
            gap: 0.5rem;
        }

        .result-label {
            color: var(--muted);
        }

        .result-value {
            font-weight: 600;
            text-align: right;
        }

        .hint {
            font-size: 0.78rem;
            color: var(--muted);
            margin-top: 0.6rem;
        }

        @media (max-width: 900px) {
            .grid { grid-template-columns: minmax(0, 1fr); }
        }
    </style>
</head>
<body>
<header>
    <div class="container nav">
        <div class="logo">
            <a href="../index.html">Learn &amp; Tools</a>
            <span>TIMESTAMP</span>
        </div>
        <div class="nav-links">
            <a href="index.html">← Tous les outils</a>
            <a href="../index.html#blog">Blog Python</a>
        </div>
    </div>
</header>

<main class="container">
    <h1>Convertisseur de timestamp</h1>
    <p class="subtitle">
        Convertis un timestamp Unix en date lisible, ou une date/heure en timestamp (secondes et millisecondes).
    </p>

    <div class="grid">
        <!-- Configuration -->
        <section class="card">
            <span class="tag">Configuration</span>

            <div class="mode">
                <label>
                    <input type="radio" name="mode" value="ts-to-date" checked>
                    Timestamp → Date
                </label>
                <label>
                    <input type="radio" name="mode" value="date-to-ts">
                    Date → Timestamp
                </label>
            </div>

            <div id="block-ts">
                <label for="timestamp-input">Timestamp Unix</label>
                <input type="number" id="timestamp-input" placeholder="Ex : 1717000000 ou 1717000000000">
            </div>

            <div id="block-date" style="display:none;">
                <label for="datetime-input">Date et heure</label>
                <input type="datetime-local" id="datetime-input">
            </div>

            <div class="row">
                <div>
                    <label for="timezone-select">Fuseau pour l’affichage</label>
                    <select id="timezone-select" style="width:100%;padding:0.45rem 0.6rem;border-radius:0.6rem;border:1px solid rgba(55,65,81,0.9);background:rgba(15,23,42,0.9);color:var(--text);font-size:0.9rem;">
                        <option value="local">Local (navigateur)</option>
                        <option value="utc">UTC</option>
                    </select>
                </div>
                <div>
                    <label for="unit-select">Unité du timestamp</label>
                    <select id="unit-select" style="width:100%;padding:0.45rem 0.6rem;border-radius:0.6rem;border:1px solid rgba(55,65,81,0.9);background:rgba(15,23,42,0.9);color:var(--text);font-size:0.9rem;">
                        <option value="auto">Auto (détection)</option>
                        <option value="seconds">Secondes</option>
                        <option value="milliseconds">Millisecondes</option>
                    </select>
                </div>
            </div>

            <div style="margin-top:0.5rem;">
                <button class="btn" type="button" onclick="convert()">Convertir</button>
                <button class="btn btn-secondary" type="button" onclick="resetForm()">Réinitialiser</button>
            </div>

            <p class="hint">
                “Auto” essaie de deviner si le timestamp est en secondes ou millisecondes selon sa longueur.
            </p>
        </section>

        <!-- Résultats -->
        <section class="card">
            <span class="tag">Résultats</span>

            <div id="results-ts-to-date">
                <div class="result-line">
                    <span class="result-label">Date locale :</span>
                    <span class="result-value" id="res-local">–</span>
                </div>
                <div class="result-line">
                    <span class="result-label">Date en UTC :</span>
                    <span class="result-value" id="res-utc">–</span>
                </div>
            </div>

            <div id="results-date-to-ts" style="display:none;">
                <div class="result-line">
                    <span class="result-label">Timestamp (secondes) :</span>
                    <span class="result-value" id="res-seconds">–</span>
                </div>
                <div class="result-line">
                    <span class="result-label">Timestamp (millisecondes) :</span>
                    <span class="result-value" id="res-millis">–</span>
                </div>
            </div>

            <p class="hint" id="res-info">
                Les résultats apparaîtront ici après conversion.
            </p>
        </section>
    </div>
</main>

<script>
    const modeRadios = document.querySelectorAll('input[name="mode"]');
    const blockTs = document.getElementById('block-ts');
    const blockDate = document.getElementById('block-date');
    const resultsTsToDate = document.getElementById('results-ts-to-date');
    const resultsDateToTs = document.getElementById('results-date-to-ts');

    const tsInput = document.getElementById('timestamp-input');
    const dtInput = document.getElementById('datetime-input');
    const tzSelect = document.getElementById('timezone-select');
    const unitSelect = document.getElementById('unit-select');

    const resLocal = document.getElementById('res-local');
    const resUtc = document.getElementById('res-utc');
    const resSeconds = document.getElementById('res-seconds');
    const resMillis = document.getElementById('res-millis');
    const resInfo = document.getElementById('res-info');

    modeRadios.forEach(r => {
        r.addEventListener('change', () => {
            if (r.checked) {
                if (r.value === 'ts-to-date') {
                    blockTs.style.display = 'block';
                    blockDate.style.display = 'none';
                    resultsTsToDate.style.display = 'block';
                    resultsDateToTs.style.display = 'none';
                    unitSelect.disabled = false;
                    resetResults();
                } else {
                    blockTs.style.display = 'none';
                    blockDate.style.display = 'block';
                    resultsTsToDate.style.display = 'none';
                    resultsDateToTs.style.display = 'block';
                    // en mode date→ts, l’unité n’a pas de sens en entrée, on la met en auto mais on peut laisser le select actif si tu préfères
                    resetResults();
                }
            }
        });
    });

    function resetResults() {
        resLocal.textContent = '–';
        resUtc.textContent = '–';
        resSeconds.textContent = '–';
        resMillis.textContent = '–';
        resInfo.textContent = 'Les résultats apparaîtront ici après conversion.';
    }

    function resetForm() {
        document.querySelector('input[value="ts-to-date"]').checked = true;
        blockTs.style.display = 'block';
        blockDate.style.display = 'none';
        resultsTsToDate.style.display = 'block';
        resultsDateToTs.style.display = 'none';
        tsInput.value = '';
        dtInput.value = '';
        tzSelect.value = 'local';
        unitSelect.value = 'auto';
        resetResults();
    }

    function detectUnit(ts) {
        if (unitSelect.value === 'seconds') return 'seconds';
        if (unitSelect.value === 'milliseconds') return 'milliseconds';
        // auto : on devine
        // 10 chiffres ≈ secondes ; 13 chiffres ≈ millisecondes
        return ts.toString().length > 10 ? 'milliseconds' : 'seconds';
    }

    function convert() {
        const mode = document.querySelector('input[name="mode"]:checked').value;
        resetResults();

        if (mode === 'ts-to-date') {
            const raw = tsInput.value.trim();
            if (!raw) {
                alert('Merci de saisir un timestamp.');
                return;
            }
            let ts = Number(raw);
            if (Number.isNaN(ts)) {
                alert('Timestamp invalide.');
                return;
            }

            const unit = detectUnit(ts);
            if (unit === 'seconds') {
                ts = ts * 1000; // on passe en millisecondes pour Date()
            }

            const date = new Date(ts);
            if (isNaN(date.getTime())) {
                alert('Impossible de convertir ce timestamp.');
                return;
            }

            const localString = date.toLocaleString(undefined, {
                year: 'numeric', month: '2-digit', day: '2-digit',
                hour: '2-digit', minute: '2-digit', second: '2-digit'
            });

            const utcString = date.toISOString().replace('T', ' ').replace('Z', ' UTC');

            resLocal.textContent = localString;
            resUtc.textContent = utcString;

            resInfo.textContent = `Conversion d’un timestamp en ${unit === 'seconds' ? 'secondes' : 'millisecondes'}.`;
        } else {
            const rawDt = dtInput.value;
            if (!rawDt) {
                alert('Merci de choisir une date et une heure.');
                return;
            }

            // datetime-local est en format "YYYY-MM-DDTHH:mm"
            const date = new Date(rawDt);
            if (isNaN(date.getTime())) {
                alert('Date/heure invalide.');
                return;
            }

            const millis = date.getTime();
            const seconds = Math.floor(millis / 1000);

            resSeconds.textContent = seconds.toString();
            resMillis.textContent = millis.toString();

            resInfo.textContent = 'Conversion de la date/heure vers timestamp Unix (secondes et millisecondes).';
        }
    }
</script>
</body>
</html>
